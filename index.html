<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>گذر زمان - هر لحظه ارزشمند است</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@100;300;400;500;700;900&display=swap');
    
    /* تم شب (پیش‌فرض) */
    :root {
      --primary-color: #e6c229;
      --dark-primary: #d4a017;
      --warning-color: #e74c3c;
      --bg-color: #1a1a2e;
      --text-color: #f8f8f8;
      --glass-bg: rgba(26, 26, 46, 0.85);
      --glass-border: rgba(230, 194, 41, 0.3);
      --particle-color: #e6c229;
    }
    
    /* تم روز */
    .day-theme {
      --primary-color: #3498db;
      --dark-primary: #2980b9;
      --warning-color: #e74c3c;
      --bg-color: #f5f7fa;
      --text-color: #2c3e50;
      --glass-bg: rgba(245, 247, 250, 0.85);
      --glass-border: rgba(52, 152, 219, 0.3);
      --particle-color: #3498db;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      font-family: 'Vazirmatn', sans-serif;
      background: var(--bg-color);
      color: var(--text-color);
      overflow: hidden;
      position: relative;
      transition: all 0.5s ease;
    }
    
    /* افکت ذرات در حال حرکت */
    .time-particle {
      position: absolute;
      width: 2px;
      height: 2px;
      background: var(--particle-color);
      border-radius: 50%;
      filter: blur(0.5px);
      animation: float 15s linear infinite;
      z-index: -1;
      opacity: 0.6;
    }
    
    #timer {
      background: var(--glass-bg);
      padding: 2.5rem;
      border-radius: 1.5rem;
      box-shadow: 0 0 30px rgba(230, 194, 41, 0.2);
      text-align: center;
      backdrop-filter: blur(10px);
      border: 1px solid var(--glass-border);
      width: 90%;
      max-width: 500px;
      position: relative;
      overflow: hidden;
      transition: all 0.3s ease;
    }
    
    .day-theme #timer {
      box-shadow: 0 0 30px rgba(52, 152, 219, 0.2);
    }
    
    #timer:hover {
      transform: scale(1.02);
      box-shadow: 0 0 40px rgba(230, 194, 41, 0.3);
    }
    
    .day-theme #timer:hover {
      box-shadow: 0 0 40px rgba(52, 152, 219, 0.3);
    }
    
    #timer::before {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 5px;
      background: linear-gradient(90deg, var(--primary-color), var(--dark-primary), var(--primary-color));
      background-size: 200% 100%;
      animation: gradient-flow 4s linear infinite;
    }
    
    #countdown {
      font-size: 4.5rem;
      margin: 1.5rem 0;
      font-weight: 700;
      color: var(--primary-color);
      letter-spacing: 2px;
      text-shadow: 0 0 10px rgba(230, 194, 41, 0.3);
      font-variant-numeric: tabular-nums;
    }
    
    .day-theme #countdown {
      text-shadow: 0 0 10px rgba(52, 152, 219, 0.3);
    }
    
    .timer-title {
      font-size: 1.4rem;
      margin-bottom: 1rem;
      font-weight: 500;
      color: var(--text-color);
      line-height: 1.6;
    }
    
    .philosophy-text {
      color: var(--text-color);
      opacity: 0.8;
      font-weight: 300;
      margin: 1.2rem 0;
      font-size: 1rem;
      line-height: 1.8;
      transition: all 0.3s ease;
    }
    
    .time-progress {
      width: 100%;
      height: 8px;
      background: rgba(0, 0, 0, 0.1);
      border-radius: 4px;
      margin: 1.5rem 0;
      overflow: hidden;
    }
    
    .day-theme .time-progress {
      background: rgba(0, 0, 0, 0.05);
    }
    
    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, var(--primary-color), var(--dark-primary));
      border-radius: 4px;
      transition: width 1s linear, background 0.5s ease;
    }
    
    /* دکمه تغییر تم */
    .theme-toggle {
      position: absolute;
      top: 20px;
      left: 20px;
      background: var(--glass-bg);
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-color);
      font-size: 1.2rem;
      transition: all 0.3s ease;
      backdrop-filter: blur(5px);
      border: 1px solid var(--glass-border);
    }
    
    .theme-toggle:hover {
      background: rgba(255, 255, 255, 0.25);
      transform: rotate(30deg);
    }
    
    /* انیمیشن‌ها */
    @keyframes float {
      0% { transform: translateY(0) translateX(0); opacity: 0; }
      10% { opacity: 0.6; }
      90% { opacity: 0.6; }
      100% { transform: translateY(-100vh) translateX(20px); opacity: 0; }
    }
    
    @keyframes gradient-flow {
      0% { background-position: 0% 50%; }
      100% { background-position: 100% 50%; }
    }
    
    @keyframes pulse-soft {
      0% { transform: scale(1); box-shadow: 0 0 30px rgba(230, 194, 41, 0.2); }
      50% { transform: scale(1.02); box-shadow: 0 0 50px rgba(230, 194, 41, 0.4); }
      100% { transform: scale(1); box-shadow: 0 0 30px rgba(230, 194, 41, 0.2); }
    }
    
    .day-theme #timer {
      animation: pulse-soft-day 2s ease;
    }
    
    @keyframes pulse-soft-day {
      0% { transform: scale(1); box-shadow: 0 0 30px rgba(52, 152, 219, 0.2); }
      50% { transform: scale(1.02); box-shadow: 0 0 50px rgba(52, 152, 219, 0.4); }
      100% { transform: scale(1); box-shadow: 0 0 30px rgba(52, 152, 219, 0.2); }
    }
    
    @keyframes warning-pulse {
      0% { text-shadow: 0 0 10px rgba(231, 76, 60, 0.3); }
      50% { text-shadow: 0 0 20px rgba(231, 76, 60, 0.6); }
      100% { text-shadow: 0 0 10px rgba(231, 76, 60, 0.3); }
    }
    
    /* ریسپانسیو */
    @media (max-width: 768px) {
      #timer {
        padding: 1.8rem;
      }
      
      #countdown {
        font-size: 3.5rem;
      }
    }
  </style>
</head>
<body>
  <div id="timer">
    <button class="theme-toggle" id="themeToggle">🌙</button>
    <h2 class="timer-title">زمان در حال گذر است...</h2>
    <p class="philosophy-text" id="philosophy-text">هر ثانیه‌ای که می‌گذرد، فرصتی است که دیگر تکرار نمی‌شود</p>
    
    <div class="time-progress">
      <div class="progress-bar" id="progress-bar"></div>
    </div>
    
    <h1 id="countdown">00:00:00</h1>
  </div>

  <script>
    // تنظیمات تایمر
    const TARGET_HOUR = 22;
    const TARGET_MINUTE = 22;
    const philosophyText = document.getElementById('philosophy-text');
    const progressBar = document.getElementById('progress-bar');
    const themeToggle = document.getElementById('themeToggle');
    
    // ایجاد ذرات شناور در پس‌زمینه
    function createTimeParticles() {
      const particle = document.createElement('div');
      particle.className = 'time-particle';
      particle.style.left = `${Math.random() * 100}%`;
      particle.style.top = `${Math.random() * 100}%`;
      particle.style.width = `${1 + Math.random() * 3}px`;
      particle.style.height = particle.style.width;
      particle.style.animationDuration = `${10 + Math.random() * 20}s`;
      document.body.appendChild(particle);
      
      // حذف ذره بعد از اتمام انیمیشن
      setTimeout(() => {
        particle.remove();
      }, 30000);
    }
    
    // تغییر تم بر اساس زمان ایران
    function updateThemeByTime() {
      const now = new Date();
      const tehranOffset = 3.5 * 60 * 60 * 1000; // ایران UTC+3:30
      const localOffset = now.getTimezoneOffset() * 60 * 1000;
      const tehranNow = new Date(now.getTime() + localOffset + tehranOffset);
      const hours = tehranNow.getHours();
      
      // بین ساعت 6 صبح تا 6 عصر تم روز
      if (hours >= 6 && hours < 18) {
        document.body.classList.add('day-theme');
        themeToggle.textContent = '🌙';
      } else {
        document.body.classList.remove('day-theme');
        themeToggle.textContent = '☀️';
      }
    }
    
    // تغییر تم دستی
    themeToggle.addEventListener('click', () => {
      document.body.classList.toggle('day-theme');
      if (document.body.classList.contains('day-theme')) {
        themeToggle.textContent = '🌙';
        localStorage.setItem('themePreference', 'day');
      } else {
        themeToggle.textContent = '☀️';
        localStorage.setItem('themePreference', 'night');
      }
    });
    
    // بارگذاری تم ذخیره شده
    function loadSavedTheme() {
      const savedTheme = localStorage.getItem('themePreference');
      if (savedTheme === 'day') {
        document.body.classList.add('day-theme');
        themeToggle.textContent = '🌙';
      } else if (savedTheme === 'night') {
        document.body.classList.remove('day-theme');
        themeToggle.textContent = '☀️';
      } else {
        updateThemeByTime();
      }
    }
    
    // محاسبه زمان باقیمانده تا 22:22 فردا
    function calculateRemainingTime() {
      const now = new Date();
      const tehranOffset = 3.5 * 60 * 60 * 1000; // ایران UTC+3:30
      const localOffset = now.getTimezoneOffset() * 60 * 1000;
      const tehranNow = new Date(now.getTime() + localOffset + tehranOffset);
      
      // زمان هدف امروز
      const targetTime = new Date(tehranNow);
      targetTime.setHours(TARGET_HOUR, TARGET_MINUTE, 0, 0);
      
      // اگر زمان هدف گذشته، برای فردا تنظیم کن
      if (tehranNow >= targetTime) {
        targetTime.setDate(targetTime.getDate() + 1);
      }
      
      const diff = targetTime - tehranNow;
      const totalHours = 24;
      const remainingHours = diff / (1000 * 60 * 60);
      const percent = (remainingHours / totalHours) * 100;
      
      return { diff, percent };
    }
    
    // به‌روزرسانی نمایش تایمر
    function updateTimer() {
      const { diff, percent } = calculateRemainingTime();
      
      // به‌روزرسانی نوار پیشرفت
      progressBar.style.width = `${percent}%`;
      
      // تغییر رنگ نوار پیشرفت در زمان کم
      if(percent < 10) {
        progressBar.style.background = 'linear-gradient(90deg, var(--warning-color), #c0392b)';
        document.getElementById('countdown').style.animation = 'warning-pulse 1.5s infinite';
        philosophyText.textContent = 'زمان در حال اتمام است! از لحظات باقیمانده نهایت استفاده را بکن';
        philosophyText.style.color = 'rgba(231, 76, 60, 0.9)';
      } else if(percent < 30) {
        progressBar.style.background = 'linear-gradient(90deg, #f39c12, #e67e22)';
        document.getElementById('countdown').style.animation = '';
        philosophyText.textContent = 'زمان به سرعت می‌گذرد... لحظاتت را هوشمندانه سپری کن';
        philosophyText.style.color = 'rgba(243, 156, 18, 0.9)';
      } else {
        progressBar.style.background = 'linear-gradient(90deg, var(--primary-color), var(--dark-primary))';
        document.getElementById('countdown').style.animation = '';
        philosophyText.textContent = 'هر ثانیه‌ای که می‌گذرد، فرصتی است که دیگر تکرار نمی‌شود';
        philosophyText.style.color = 'rgba(248, 248, 248, 0.8)';
      }
      
      // محاسبه ساعت، دقیقه و ثانیه
      const hours = Math.floor(diff / (1000 * 60 * 60));
      const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((diff % (1000 * 60)) / 1000);
      
      // نمایش با اعداد انگلیسی
      const format = num => String(num).padStart(2, '0');
      document.getElementById('countdown').textContent = `${format(hours)}:${format(minutes)}:${format(seconds)}`;
      
      // تأکید بصری روی گذر زمان
      if(minutes % 30 === 0 && seconds === 0) {
        const animationName = document.body.classList.contains('day-theme') ? 'pulse-soft-day' : 'pulse-soft';
        document.getElementById('timer').style.animation = `${animationName} 2s ease`;
        setTimeout(() => {
          document.getElementById('timer').style.animation = '';
        }, 2000);
      }
    }
    
    // مقداردهی اولیه
    loadSavedTheme();
    updateTimer();
    updateThemeByTime();
    setInterval(updateTimer, 1000);
    
    // بررسی تغییر تم هر ساعت
    setInterval(updateThemeByTime, 3600000);
    
    // ایجاد ذرات زمان در پس‌زمینه
    setInterval(createTimeParticles, 300);
  </script>
</body>
</html>
